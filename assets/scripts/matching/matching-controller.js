// Generated by CoffeeScript 1.7.1
(function() {
  var App;

  App = angular.module('kinoglede');

  App.controller('MatchingController', [
    '$scope', 'Users', 'Matches', function($scope, Users, Matches) {
      $scope.init = function() {
        if ($scope.data.isLoggedIn()) {
          return $scope.data.matchingUsers = Users.query({
            currentUserId: $scope.data.user.id
          });
        }
      };
      $scope.showMoreMatches = function() {
        return $scope.data.matchingUsers && $scope.data.matchingUsers.$resolved && $scope.data.matchingUsers.length;
      };
      $scope.showNoMoreMatches = function() {
        return !$scope.showMoreMatches() && $scope.data.isLoggedIn();
      };
      $scope.currentMatch = function() {
        if ($scope.data.matchingUsers) {
          return $scope.data.matchingUsers[$scope.data.matchingUsers.length - 1];
        }
      };
      $scope.approveMatch = function(matchingUserId) {
        return Users.approveMatch({
          userId: $scope.data.user.id,
          matchingUserId: matchingUserId
        });
      };
      return $scope.rejectMatch = function(matchUserId) {
        console.log(matchUserId);
        return Matches.reject({
          matchUserId: matchUserId
        }).$promise.then(function(data) {
          console.log('DATA: ' + data);
          return $scope.data.matchingUsers.pop();
        });
      };
    }
  ]);

}).call(this);

//# sourceMappingURL=matching-controller.map
